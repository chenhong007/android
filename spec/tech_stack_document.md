# 技术选型文档：时间都去哪了APP

本技术选型文档面向非技术背景的读者，解释我们在“时间都去哪了”手机使用时间统计应用中所采用的各项技术及其背后的理由。文档分为前端、后端、基础设施与部署、第三方集成、安全与性能，以及总结六大部分。

## 一、前端技术（用户界面与交互）

- **Android SDK (API 33+)**
  • 支持 Android 13 及以上系统，保证最新系统特性与安全性。

- **Jetpack Compose**
  • 谷歌提供的声明式 UI 框架，用 Kotlin 编写界面，代码更简洁、易维护。
  • 支持动画、主题（浅/深色）、响应式布局，提升用户体验一致性。

- **Android Jetpack 组件**
  • **Navigation**：管理页面切换和参数传递，简化多页面导航逻辑。
  • **ViewModel**：存放界面状态，屏幕旋转或后台恢复时保持数据不丢失。
  • **LiveData**：对界面数据变化自动刷新，保证 UI 与数据同步。

- **UI 样式与图标**
  • **系统字体**：-apple-system、Segoe UI、Roboto 等，实现苹果科技风格和跨平台一致性。
  • **颜色规范**：主要文本 #1d1d1f、次要文本 #6b7280，保证对比度与易读性。
  • **Lucide Icons**：线性图标库，1.5–2px 线条粗细，与整体扁平化、简约风格契合。

- **图表展示库**
  • **MPAndroidChart**：提供条形图、折线图、饼图、热力图等，支持手势缩放、拖拽和动画过渡，满足多维数据可视化需求。

以上技术共同作用，为用户提供流畅、直观且美观的界面和交互体验。

## 二、后端技术（数据处理与存储）

- **Room 数据库**
  • 谷歌官方 ORM（对象关系映射）解决方案，简化 SQLite 数据库的操作。
  • 与 Kotlin 协程/LiveData 无缝集成，异步读写，保证主线程流畅。

- **SQLCipher**
  • 在 Room 基础上增强了本地数据加密，所有使用记录、解锁次数、通知历史等敏感信息均加密存储，符合 GDPR 要求。

- **系统级 API**
  • **UsageStatsManager**：精确监控应用前台/后台切换，在毫秒级别记录会话时长并排除锁屏息屏情况。
  • **NotificationListenerService**：拦截并统计通知接收、点击、清除等行为，支持通知分类与骚扰通知识别。

- **本地文件 I/O**
  • 标准 Android 文件 API：实现加密备份（CSV/PDF/JSON）和本地恢复，无需云端服务，确保数据仅存设备。

- **数据层架构**
  • **Repository 模式**：封装数据来源（数据库与文件），上层界面只需调用统一接口，降低耦合度。

以上后端技术确保数据采集精准、安全，且易于维护与扩展。

## 三、基础设施与部署

- **版本控制**
  • Git（GitHub/GitLab 等托管）管理代码版本，支持多人协作和代码回滚。

- **开发与构建**
  • **Android Studio Arctic Fox** 及以上版本：官方 IDE，提供丰富的调试、预览与性能分析工具。
  • **Gradle 构建系统**：自动化编译、依赖管理和打包 APK。

- **CI/CD 流水线（可选）**
  • GitHub Actions / GitLab CI：配置自动化检查（代码格式、Lint、单元测试），保证代码质量。
  • 自动生成调试与发布包，加快迭代速度。

- **分发方式**
  • 本地 APK 安装，无需第三方应用市场；用户直接在设备上打开 APK 完成安装。

此部分决策使项目代码管理规范、开发流程可追溯，发布与测试便捷高效。

## 四、第三方集成

本应用坚持完全离线、无任何第三方 SDK 策略：

- **无分析、无崩溃上报**
  • 不集成 Firebase Analytics、Crashlytics 等，保证用户数据零外泄。

- **仅使用开源库**
  • Jetpack Compose、Room、MPAndroidChart、Lucide Icons 等均为开源组件，社区活跃，易于问题排查与定制。

此策略确保数据隐私和合规性，同时降低应用体量与权限需求。

## 五、安全与性能考虑

- **安全措施**
  • 全量数据加密（SQLCipher），未经用户同意，不向外上传任何信息。
  • 严格的权限请求流程：使用访问、通知访问权限均需用户显式授权，不授权则屏蔽相关功能并给出友好提示。
  • 遵循 GDPR：不收集个人身份信息，用户可随时导出/清理数据。

- **性能优化**
  • **数据采样模式**：标准／高精度／节能三种模式，可在精度与电量之间灵活切换。
  • **异步处理**：数据库写入、文件导入导出均在后台线程进行，避免主线程卡顿。
  • **缓存与批处理**：结合 Room 事务与内存缓存，减少磁盘读写次数。
  • **图表下采样**：对超长数据序列自动减少显示点，避免图表渲染延迟。
  • **启动与渲染**：目标 App 启动时间 ≤1.5s；图表加载与数据查询时间 <300ms。

这些安全与性能策略保证应用既高效又可靠，用户体验平滑。

## 六、结论与整体技术汇总

“时间都去哪了”APP 的技术选型遵循**精准统计、安全隐私、离线优先**三大原则：

- 前端以 Jetpack Compose + Android Jetpack 组件打造现代化、高性能界面；
- 后端以 Room + SQLCipher 构筑安全可靠的本地数据库，并通过系统级 API 精确采集用户行为数据；
- 基础设施采用 Git 管理、Android Studio + Gradle 构建，结合可选 CI/CD 流水线提升开发效率；
- 坚持无第三方分析与上报，所有数据仅存设备，符合 GDPR 要求；
- 通过性能模式、异步处理与缓存策略，实现低耗电、高流畅度的用户体验。

该技术栈既满足产品对精准统计、智能可视化与隐私保护的严格需求，也为未来功能扩展（如 iOS 支持、AI 分析）奠定了坚实基础。