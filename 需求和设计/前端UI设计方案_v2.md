# 前端UI设计方案 v2.1

## 🎨 设计理念

### 设计原则

1. **简洁直观**：信息层次清晰，减少认知负担
2. **数据可视化**：用图表和动画呈现数据趋势
3. **流畅体验**：流畅的动画过渡，响应式交互
4. **个性化**：支持深色/浅色主题，自定义颜色
5. **无障碍**：支持屏幕阅读器，高对比度模式

### 视觉风格

- **设计语言**：Material Design 3 (Material You)
- **色彩系统**：动态主题色，支持深色/浅色模式
- **圆角风格**：圆润的卡片和按钮（16-24dp圆角）
- **阴影效果**：层次分明的毛玻璃效果
- **字体系统**：Roboto / 思源黑体，动态字号

---

## 📱 页面架构

### 底部导航栏（Tab Bar）

```
┌──────────────────────────────────┐
│ 🏠     📊     📱     🎯     📜  │
│首页   统计   应用   目标   历史 │
└──────────────────────────────────┘
```

5个主要标签页：

1. **首页（Home）**：今日概览和快速统计
2. **统计（Statistics）**：详细图表和数据分析
3. **应用（Apps）**：应用管理和详情
4. **目标（Goals）**：使用目标和提醒设置
5. **历史（History）**：时间轴和数据导出

---

## 🏠 页面1：首页（Home）

### 设计目标

- 一眼看懂今日使用情况
- 快速访问重要信息
- 提供行动建议

### 📊 核心指标说明

首页展示4个核心指标，层次分明：

#### 1️⃣ 今日屏幕时长

- **定义**：用户主动解锁屏幕后，屏幕保持亮起的总时间
- **包含**：所有应用使用时间 + 桌面停留时间 + 系统界面时间
- **数据来源**：`screen_event` 表的 SCREEN_ON/OFF 事件配对计算
- **展示位置**：顶部主卡片（最大、最显眼）
- **为什么重要**：这是用户真实使用设备的总时间

#### 2️⃣ 手机解锁次数

- **定义**：用户主动触发屏幕从熄屏到亮屏的次数
- **数据来源**：`screen_event` 表的 USER_PRESENT 事件计数
- **展示位置**：左侧副卡片
- **为什么重要**：反映使用频率，解锁越多说明越依赖手机

#### 3️⃣ APP打开次数

- **定义**：用户在亮屏情况下，APP切换到前台的总次数
- **数据来源**：`app_session` 表的记录条数（COUNT(*)）
- **展示位置**：右侧副卡片
- **为什么重要**：反映APP使用频率，打开次数越多说明越频繁切换应用

#### 4️⃣ APP使用时长

- **定义**：所有应用在前台运行的总时间
- **数据来源**：`app_session` 表的 duration 字段总和
- **展示位置**：右侧副卡片
- **关系**：应用使用时长 < 今日屏幕时长（因为屏幕时长还包括桌面等非应用时间）
- **为什么重要**：精确反映应用的使用情况

**四者关系示意：**
```
┌─────────────────────────────────────────┐
│ 📱 今日屏幕时长 (5h 23m) ← 最大       │
│ ┌───────────────────────────────┐ │
│ │🔆 APP使用时长 (4h 51m)           │ │
│ │微信 2h15m + 抖音 1h42m + ...     │ │
│ └───────────────────────────────┘ │
│ + 桌面/系统界面 (32m)                  │
└─────────────────────────────────────────┘

独立统计指标（反映使用频率）：
🔓 手机解锁次数 (152次) ← 手机解锁频率
📲 APP打开次数 (87次)   ← APP切换频率
```

### 页面布局

```
╔════════════════════════════════════╗
║ 🌅 早上好，张三                    ║
║ 今天是 2025年10月15日 星期三      ║
╠════════════════════════════════════╣
║ ┌──────────────────────────────┐║
║ │ 📱 今日屏幕时长                │║
║ │                               │║
║ │      5小时 23分               │║
║ │      ▓▓▓▓▓▓▓▓░░░░  67%        │║
║ │                               │║
║ │ ↗ 比昨天增加 1小时12分        │║
║ │ 💡 建议：今天已使用较多         │║
║ └──────────────────────────────┘║
╠════════════════════════════════════╣
║ ┌──────────┐ ┌──────────────┐  ║
║ │🔓手机解锁│ │📲APP打开     │  ║
║ │         │ │             │  ║
║ │  152次  │ │    87次     │  ║
║ │▓▓▓▓▓░   │ │ ▓▓▓▓▓▓░    │  ║
║ │+23次   │ │ +12次      │  ║
║ └──────────┘ └──────────────┘  ║
╠════════════════════════════════════╣
║ ┌──────────────────────────────┐║
║ │ 🔆 APP使用时长                │║
║ │                               │║
║ │      4小时 51分               │║
║ │      ▓▓▓▓▓▓▓▓░░░  90%        │║
║ │ +45分 vs昨天                  │║
║ └──────────────────────────────┘║
╠════════════════════════════════════╣
║ 📌 今日最常用应用                  ║
║                                    ║
║ ┌──────────────────────────────┐║
║ │🟢 微信         2h 15m   28%  │║
║ │▓▓▓▓▓▓▓▓░░░░░░░░░░░░░░     │║
║ │打开23次，最后使用 10:30     │║
║ └──────────────────────────────┘║
║                                    ║
║ ┌──────────────────────────────┐║
║ │🔴 抖音         1h 42m   21%  │║
║ │▓▓▓▓▓▓▓░░░░░░░░░░░░░░░░░     │║
║ │打开15次，最后使用 11:45     │║
║ └──────────────────────────────┘║
║                                    ║
║ ┌──────────────────────────────┐║
║ │🔵 Chrome       52m      11%  │║
║ │▓▓▓░░░░░░░░░░░░░░░░░░░░░     │║
║ │打开8次，最后使用 14:20     │║
║ └──────────────────────────────┘║
║                                    ║
║ [ 查看全部应用 > ]                ║
╠════════════════════════════════════╣
║ 🎯 使用目标进度                    ║
║                                    ║
║ 每日限制 6小时                     ║
║ ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓░░░░  89% (5h23m)║
║ ⚠️ 还剩 37分钟                    ║
║                                    ║
║ [ 查看详细目标 > ]                ║
╚════════════════════════════════════╝
```

### 组件详细设计

#### 1. 问候卡片（Greeting Card）
#### 2. 今日屏幕时长主卡片
#### 3. 快速统计卡片（双列）
#### 4. 最常用应用列表

#### 5. 目标进度卡片

### 交互动画

1. **卡片进入动画**：从下向上滑入，带透明度渐变
2. **进度条动画**：填充动画（300ms），弹性效果
3. **点击反馈**：缩放动画（0.98倍）
4. **刷新动画**：下拉刷新，加载动画

---

## 📊 页面2：统计（Statistics）

### 页面布局

```
╔════════════════════════════════════╗
║ 📊 数据统计                        ║
╠════════════════════════════════════╣
║ ┌──────────────────────────────┐║
║ │📅 今天 │ 🗓本周  📆 本月  │║
║ └──────────────────────────────┘║
╠════════════════════════════════════╣
║ 使用时长趋势                       ║
║ ┌──────────────────────────────┐║
║ │       📈 折线图             │║
║ │     ╱╲                      │║
║ │  ╱╲/  ╲ ╱╲                │║
║ │╱      ╲  ╲╱╲            │║
║ │                ╲           │║
║ │周一 周二 周三 周四 周五       │║
║ └──────────────────────────────┘║
╠════════════════════════════════════╣
║ 应用分类占比                       ║
║ ┌──────────────────────────────┐║
║ │     🍩 环形图               │║
║ │                             │║
║ │      社交 35%               │║
║ │      娱乐 28%               │║
║ │      工具 20%               │║
║ │      其他 17%               │║
║ └──────────────────────────────┘║
╠════════════════════════════════════╣
║ 每小时使用分布                    ║
║ ┌──────────────────────────────┐║
║ │     📊 柱状图               │║
║ │     █ █    █             │║
║ │     █ █    █ █          │║
║ │ █  █ █ █ █ █ █ █      │║
║ │ █  █ █ █ █ █ █ █      │║
║ │08 09 10 11 12 13 14 15      │║
║ └──────────────────────────────┘║
╠════════════════════════════════════╣
║ 详细数据表                        ║
║ ┌──────────────────────────────┐║
║ │今日屏幕时长   5h 23m         │║
║ │手机解锁次数   152次          │║
║ │APP打开次数    87次           │║
║ │平均会话时长   3min 42s       │║
║ │最长会话时长   45min (抖音)   │║
║ │首次解锁时间   07:23          │║
║ │最后息屏时间   23:15          │║
║ └──────────────────────────────┘║
╚════════════════════════════════════╝
```

### 关键组件

#### 1. 时间段选择器
#### 2. 趋势折线图
---

## 📱 页面3：应用（Apps）

### 页面布局

```
╔════════════════════════════════════╗
║ 📱 应用管理                        ║
╠════════════════════════════════════╣
║ 🔍 [搜索应用...]      [🔽 排序]   ║
╠════════════════════════════════════╣
║ ┌──────────────────────────────┐║
║ │🟢 社交 (3)                  │║
║ │├─ 微信    2h 15m   ⭐⭐⭐⭐  │║
║ │├─ QQ      45m      ⭐⭐⭐   │║
║ │└─ 钉钉    23m      ⭐⭐      │║
║ └──────────────────────────────┘║
║                                   ║
║ ┌──────────────────────────────┐║
║ │🔴 娱乐 (5)                  │║
║ │├─ 抖音    1h 42m   ⭐⭐⭐⭐⭐│ ║
║ │├─ B站    58m      ⭐⭐⭐⭐  │║
║ │├─ 网易云 32m      ⭐⭐⭐   │║
║ │└─ 更多... (展开)             │║
║ └──────────────────────────────┘║
╠════════════════════════════════════╣
║ [+ 添加黑名单应用]                ║
╚════════════════════════════════════╝
```

---

## 🎯 页面4：目标（Goals）

### 页面布局

```
╔════════════════════════════════════╗
║ 🎯 使用目标                        ║
╠════════════════════════════════════╣
║ 我的目标 (3)                       ║
║                                    ║
║ ┌──────────────────────────────┐║
║ │📱 每日屏幕时长 < 6小时        │║
║ │                             │║
║ │▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓░░░░  89%   │║
║ │                             │║
║ │5h 23m / 6h                  │║
║ │⚠️ 还剩 37分钟                │║
║ │                             │║
║ │[编辑] [删除]                 │║
║ └──────────────────────────────┘║
║                                    ║
║ ┌──────────────────────────────┐║
║ │🎮 抖音每日 < 1小时            │║
║ │                             │║
║ │▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓  170%   │║
║ │                             │║
║ │1h 42m / 1h                  │║
║ │❌已超出 42分钟               │║
║ │                             │║
║ │[编辑] [删除]                 │║
║ └──────────────────────────────┘║
╠════════════════════════════════════╣
║ [+ 创建新目标]                    ║
╚════════════════════════════════════╝
```

---

## 📜 页面5：历史（History）

### 页面布局

```
╔════════════════════════════════════╗
║ 📜 历史记录                        ║
╠════════════════════════════════════╣
║ 📅 2025年10月                    ║
║                                    ║
║ 日一 二 三 四 五 六              ║
║    1  2  3  4  5  6               ║
║ ▓ ░ ░ ░ ░ ░ ▓             ║
║                                    ║
║ 7  8  9  10 11 12 13              ║
║ ▓ ░ ░ ░ ░ ░ ░             ║
║                                    ║
║ 14 15 16 17 18 19 20              ║
║ ░ ▓ ░ ░ ░ ░ ░             ║
║                                    ║
║ 颜色深度代表使用时长                ║
║ ░< 2h  ▒2-4h  ▓4-6h  █> 6h   ║
╠════════════════════════════════════╣
║ 时间轴视图                        ║
║                                    ║
║ 📱 08:00 - 08:30 (30min)         ║
║ └─ 微信     15min                 ║
║ └─ Chrome   10min                 ║
║ └─ QQ       5min                  ║
║                                    ║
║ 📱 09:00 - 10:15 (1h 15min)      ║
║ └─ 抖音     45min                 ║
║ └─ B站     30min                 ║
╠════════════════════════════════════╣
║ [📊 导出数据]  [🗑️ 清理数据]    ║
╚════════════════════════════════════╝
```

---

## 🎨 设计系统

### 颜色系统


### 字体系统


### 圆角系统


### 间距系统


---

## 🌓 深色模式

支持完整的深色主题：
- 自动跟随系统设置
- 手动切换深色/浅色模式
- OLED黑色主题（可选）
- 所有颜色适配深色模式

---

## ♿ 无障碍设计

1. **屏幕阅读器**：所有组件添加`contentDescription`
2. **对比度**：符合WCAG AA标准
3. **字体缩放**：支持系统字体大小调整
4. **触控目标**：最小 48dp × 48dp
5. **焦点指示**：清晰的焦点边框

---

## 📝 总结

这套UI设计方案具有以下特点：

### 优势
1. **现代化设计**：Material Design 3，毛玻璃效果
2. **数据可视化**：丰富的图表类型，清晰的数据展示
3. **流畅体验**：精心设计的动画和过渡
4. **个性化**：支持主题切换，自定义颜色
5. **信息层次清晰**：合理的视觉层级，降低认知负担

### 实现建议
1. 使用Jetpack Compose构建UI
2. 使用MPAndroidChart绘制图表
3. 使用Coil加载应用图标
4. 使用Lottie实现复杂动画
5. 使用DataStore保存用户偏好

### 下一步
1. 创建设计原型（Figma）
2. 实现核心组件库
3. 实现页面布局
4. 添加动画效果
5. 用户测试和优化
